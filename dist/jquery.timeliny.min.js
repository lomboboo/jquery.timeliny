!function(t,a,e,i){"use strict";function n(n,s){function r(){x("onInit"),o(),s.hideBlankYears===!1&&l(),d(),m(),f(),p(),h(),y(),u(),v(),g(),N(),c()}function o(){T.detach().sort(function(a,e){return"asc"===s.order?t(a).data("year")-t(e).data("year"):t(e).data("year")-t(a).data("year")}),C.append(T)}function c(){var t=C.find("."+s.className+"-timeblock.active").first().attr("data-year");x("afterLoad",[t]),C.addClass("loaded")}function l(){var t=parseInt(T.first().attr("data-year")),a=parseInt(T.last().attr("data-year"));if("asc"===s.order)for(var e=t-s.boundaries;e<a+s.boundaries+1;e++)T.parent().find("[data-year="+e+"]").length<=0&&(e>t-s.boundaries?T.parent().find("[data-year="+(e-1)+"]").after('<div data-year="'+e+'" class="inactive"></div>'):T.first().before('<div data-year="'+e+'" class="inactive"></div>'));else for(var e=t+s.boundaries;e>=a-s.boundaries;e--)T.parent().find("[data-year="+e+"]").length<=0&&(e<t+s.boundaries?T.parent().find("[data-year="+(e+1)+"]").after('<div data-year="'+e+'" class="inactive"></div>'):T.first().before('<div data-year="'+e+'" class="inactive"></div>'));T=C.children()}function d(){return C.addClass(s.className).children().wrapAll(s.wrapper).wrapAll('<div class="'+s.className+'-timeline"></div>')}function f(){var t=.8*C.css("padding-top").replace("px","");C.find("."+s.className+"-timeline").css("width",""+T.length*t+"px"),C.find("."+s.className+"-timeliny-timeblock").css("width",""+t+"px")}function m(){T.each(function(a){var e=t(this).html(),i=t(this).attr("data-year"),n='<a href="#'+i+'" class="'+s.className+'-dot" data-year="'+i+'" data-text="'+e+'"></a><span class="'+s.className+'-circle"></span>';t(this).addClass(""+s.className+"-timeblock").html(n)})}function u(){var t=s.disableVerticalLine?"opacity: 0; position:absolute;z-index: -99999;":"";C.append('<div class="'+s.className+'-vertical-line" style="'+t+'"></div>')}function v(t){var a,e=C.find("."+s.className+"-vertical-line").position().left,i=C.find("."+s.className+"-timeblock.active").position().left,n=C.find("."+s.className+"-timeblock.active ."+s.className+"-dot").width()/2,r=i-e;a=r>0?"-"+(Math.abs(r)+n+1):"+"+(Math.abs(r)-n-1),C.find("."+s.className+"-timeline").animate({left:a},s.animationSpeed,function(){if("undefined"!=typeof t)if("click"===t){var a=C.find("."+s.className+"-timeblock.active").first().attr("data-year");x("afterChange",[a])}else"resize"===t&&x("afterResize")})}function p(){T.parent().find("."+s.className+"-timeblock:not(.inactive) ."+s.className+"-dot").on("click touchstart",function(a){a.preventDefault();var e=t(this).parent().parent().find("."+s.className+"-timeblock.active").attr("data-year"),i=t(this).attr("data-year");return e!=i&&(x("onLeave",[e,i]),T.removeClass("active"),t(this).closest("."+s.className+"-timeblock").addClass("active")),v("click"),!1})}function h(){var a=s.distance||30;T.each(function(e){var i=t(this).attr("data-year"),n=t(this).next().attr("data-year"),s=(parseInt(n,10)-parseInt(i,10))*a;t(this).css("margin-right",s)})}function y(){t("html").keydown(function(a){if(39==a.which){var e=t(this).find("."+s.className+"-timeblock:not(.inactive) ."+s.className+"-dot"),i=(t(e).parent().parent().find("."+s.className+"-timeblock.active").attr("data-year"),t(e).parent().parent().find("."+s.className+"-timeblock.active").next().attr("data-year"));b(i)}else if(37==a.which){var e=t(this).find("."+s.className+"-timeblock:not(.inactive) ."+s.className+"-dot"),n=(t(e).parent().parent().find("."+s.className+"-timeblock.active").attr("data-year"),t(e).parent().parent().find("."+s.className+"-timeblock.active").prev().attr("data-year"));b(n)}})}function g(){function e(t,a){var e;return function(){var i=arguments,n=this;clearTimeout(e),e=setTimeout(function(){t.apply(n,i)},a)}}t(a).on("resize.timeliny",e(function(){v("resize")},350))}function N(){function i(t,a){if(a.targetTouches){var e=a.targetTouches[0];c=e.pageX}o=t,l=c-o.offsetLeft}function n(t){if(t.targetTouches){var i=t.targetTouches[0];c=i.pageX,o.style.left=i.pageX-l+"px"}else c=e.all?a.event.clientX:t.pageX,null!==o&&(o.style.left=c-l+"px")}function r(){if(o){var a=C.find("."+s.className+"-vertical-line").offset().left,e=null,i=1e23;T.parent().find("."+s.className+"-timeblock:not(.inactive) ."+s.className+"-dot").each(function(n){var s=t(this).offset().left,r=Math.abs(s-a);r<i&&(console.log(t(this).attr("data-year")),e=t(this).attr("data-year"),i=r)}),C.find("."+s.className+"-dot[data-year="+e+"]").trigger("click"),o=null}}var o=null,c=0,l=0;s.draggedElement?(t(s.draggedElement).on("mousedown touchstart",function(t){return i(C.find("."+s.className+"-timeline")[0],t),!1}),t(s.draggedElement).on("mousemove touchmove",function(t){n(t)}),t(s.draggedElement).on("mouseup touchend",function(){r()})):(C.first().on("mousedown touchstart",function(t){return i(C.find("."+s.className+"-timeline")[0],t),!1}),t(e).on("mousemove.timeliny touchmove.timeliny",function(t){n(t)}),t(e).on("mouseup.timeliny touchend.timeliny",function(){r()}))}function b(t){var a=C.find("."+s.className+"-timeblock[data-year="+t+"]:not(.inactive) ."+s.className+"-dot").first();a.length>0&&a.trigger("click")}function k(t,a){return a?void(s[t]=a):s[t]}function w(){C.each(function(){var i=t(this);t(a).off("resize.timeliny"),i.find("."+s.className+"-timeblock:not(.inactive) ."+s.className+"-dot").off("click"),t(e).off("mousemove.timeliny"),t(e).off("mouseup.timeliny"),i.first().off("mousedown"),i.remove(),x("onDestroy"),i.removeData("plugin_timeliny")})}function x(t,a){s[t]!==i&&s[t].apply(z,a)}var z=n,C=t(n),T=C.children();return s=t.extend({},t.fn.timeliny.defaults,s),r(),{option:k,destroy:w,goToYear:b}}t.fn.timeliny=function(a){if(console.log(a),"string"==typeof arguments[0]){var e,s=arguments[0],r=Array.prototype.slice.call(arguments,1);return this.each(function(){if(!t.data(this,"plugin_timeliny")||"function"!=typeof t.data(this,"plugin_timeliny")[s])throw new Error("Method "+s+" does not exist on jQuery.timeliny");e=t.data(this,"plugin_timeliny")[s].apply(this,r)}),e!==i?e:this}if("object"==typeof a||!a)return this.each(function(){t.data(this,"plugin_timeliny")||t.data(this,"plugin_timeliny",new n(this,a))})},t.fn.timeliny.defaults={order:"asc",className:"timeliny",wrapper:'<div class="timeliny-wrapper"></div>',boundaries:2,animationSpeed:250,hideBlankYears:!1,onInit:function(){},onDestroy:function(){},afterLoad:function(t){},onLeave:function(t,a){},afterChange:function(t){},afterResize:function(){}}}(jQuery,window,document);