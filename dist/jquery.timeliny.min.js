!function(t,e,a,i){"use strict";function n(n,s){function r(){C("onInit"),o(),s.hideBlankYears===!1&&l(),d(),u(),f(),h(),p(),y(),m(),v(),g(),N(),c()}function o(){E.detach().sort(function(e,a){return"asc"===s.order?t(e).data("year")-t(a).data("year"):t(a).data("year")-t(e).data("year")}),z.append(E)}function c(){var t=z.find("."+s.className+"-timeblock.active").first().attr("data-year");C("afterLoad",[t]),z.addClass("loaded")}function l(){var t=parseInt(E.first().attr("data-year")),e=parseInt(E.last().attr("data-year"));if("asc"===s.order)for(var a=t-s.boundaries;a<e+s.boundaries+1;a++)E.parent().find("[data-year="+a+"]").length<=0&&(a>t-s.boundaries?E.parent().find("[data-year="+(a-1)+"]").after('<div data-year="'+a+'" class="inactive"></div>'):E.first().before('<div data-year="'+a+'" class="inactive"></div>'));else for(var a=t+s.boundaries;a>=e-s.boundaries;a--)E.parent().find("[data-year="+a+"]").length<=0&&(a<t+s.boundaries?E.parent().find("[data-year="+(a+1)+"]").after('<div data-year="'+a+'" class="inactive"></div>'):E.first().before('<div data-year="'+a+'" class="inactive"></div>'));E=z.children()}function d(){return z.addClass(s.className).children().wrapAll(s.wrapper).wrapAll('<div class="'+s.className+'-timeline"></div>')}function f(){var t=.8*z.css("padding-top").replace("px","");z.find("."+s.className+"-timeline").css("width",""+E.length*t+"px"),z.find("."+s.className+"-timeliny-timeblock").css("width",""+t+"px")}function u(){E.each(function(e){var a=t(this).html(),i=t(this).attr("data-year"),n='<a href="#'+i+'" class="'+s.className+'-dot" data-year="'+i+'" data-text="'+a+'"></a><span class="'+s.className+'-circle"></span>';t(this).addClass(""+s.className+"-timeblock").html(n)})}function m(){var t=s.disableVerticalLine?"opacity: 0; position:absolute;z-index: -99999;":"";z.append('<div class="'+s.className+'-vertical-line" style="'+t+'"></div>')}function v(t){var e,a=z.find("."+s.className+"-vertical-line").position().left,i=z.find("."+s.className+"-timeblock.active").position().left,n=z.find("."+s.className+"-timeblock.active ."+s.className+"-dot").width()/2,r=i-a;e=r>0?"-"+(Math.abs(r)+n+1):"+"+(Math.abs(r)-n-1),z.find("."+s.className+"-timeline").animate({left:e},s.animationSpeed,function(){if("undefined"!=typeof t)if("click"===t){var e=z.find("."+s.className+"-timeblock.active").first().attr("data-year");C("afterChange",[e])}else"resize"===t&&C("afterResize")})}function h(){E.parent().find("."+s.className+"-timeblock:not(.inactive) ."+s.className+"-dot").on("click touchstart",function(e){e.preventDefault();var a=t(this).parent().parent().find("."+s.className+"-timeblock.active").attr("data-year"),i=t(this).attr("data-year");return a!=i&&(C("onLeave",[a,i]),E.removeClass("active"),t(this).closest("."+s.className+"-timeblock").addClass("active")),v("click"),!1})}function p(){var e=s.distance||30;E.each(function(a){var i=t(this).attr("data-year"),n=t(this).next().attr("data-year"),s=(parseInt(n,10)-parseInt(i,10))*e;t(this).css("margin-right",s)})}function y(){t("html").keydown(function(e){if(39==e.which){var a=t(this).find("."+s.className+"-timeblock:not(.inactive) ."+s.className+"-dot"),i=(t(a).parent().parent().find("."+s.className+"-timeblock.active").attr("data-year"),t(a).parent().parent().find("."+s.className+"-timeblock.active").next().attr("data-year"));k(i)}else if(37==e.which){var a=t(this).find("."+s.className+"-timeblock:not(.inactive) ."+s.className+"-dot"),n=(t(a).parent().parent().find("."+s.className+"-timeblock.active").attr("data-year"),t(a).parent().parent().find("."+s.className+"-timeblock.active").prev().attr("data-year"));k(n)}})}function g(){function a(t,e){var a;return function(){var i=arguments,n=this;clearTimeout(a),a=setTimeout(function(){t.apply(n,i)},e)}}t(e).on("resize.timeliny",a(function(){v("resize")},350))}function N(){function i(t,e){if(e.targetTouches){var a=e.targetTouches[0];l=a.pageX}c=t,d=l-c.offsetLeft}function n(t){if(t.targetTouches){var i=t.targetTouches[0];l=i.pageX,c.style.left=i.pageX-d+"px";var n=t.originalEvent.touches[0].clientX;n>o?f=!1:n<o&&(f=!0),o=n}else l=a.all?e.event.clientX:t.pageX,null!==c&&(c.style.left=l-d+"px");var r=b(t,f),u=z.find("."+s.className+"-dot");u.removeClass("highlight"),u.eq(r).addClass("highlight")}function r(t){if(c){var e=b(t,f),a=z.find("."+s.className+"-dot").eq(e);a.removeClass("highlight"),a.trigger("click"),c=null}}var o,c=null,l=0,d=0,f=!0;s.draggedElement?(t(s.draggedElement).on("mousedown touchstart",function(t){return i(z.find("."+s.className+"-timeline")[0],t),!1}),t(s.draggedElement).on("mousemove touchmove",function(t){n(t)}),t(s.draggedElement).on("mouseup touchend",function(t){r(t)})):(z.first().on("mousedown touchstart",function(t){return i(z.find("."+s.className+"-timeline")[0],t),!1}),t(a).on("mousemove.timeliny touchmove.timeliny",function(t){n(t)}),t(a).on("mouseup.timeliny touchend.timeliny",function(t){r(t)}))}function b(e,a){var i=0,n=z.find("."+s.className+"-vertical-line").offset().left,r=[];return E.parent().find("."+s.className+"-timeblock:not(.inactive) ."+s.className+"-dot").each(function(e){var a=t(this).offset().left;r.push({currDotPos:a,index:e})}),e.targetTouches&&(i=s.swipeDistanceMobile||.5),w(n,r,a,i)}function k(t){var e=z.find("."+s.className+"-timeblock[data-year="+t+"]:not(.inactive) ."+s.className+"-dot").first();e.length>0&&e.trigger("click")}function w(t,e,a,i){var n;return e.some(function(e,s,r){var o=null;if(!r[s+1])return n=a?r[r.length-1].index:r[0].index,!0;o=r[s+1];var c=Math.abs(t-e.currDotPos),l=o.currDotPos-e.currDotPos,d=l/2,f=a?d-d*i:d+d*i,u=e.currDotPos<t&&t<o.currDotPos;return u?(n=c>f?e.index+1:e.index,!0):void 0}),n}function x(t,e){return e?void(s[t]=e):s[t]}function D(){z.each(function(){var i=t(this);t(e).off("resize.timeliny"),i.find("."+s.className+"-timeblock:not(.inactive) ."+s.className+"-dot").off("click"),t(a).off("mousemove.timeliny"),t(a).off("mouseup.timeliny"),i.first().off("mousedown"),i.remove(),C("onDestroy"),i.removeData("plugin_timeliny")})}function C(t,e){s[t]!==i&&s[t].apply(T,e)}var T=n,z=t(n),E=z.children();return s=t.extend({},t.fn.timeliny.defaults,s),r(),{option:x,destroy:D,goToYear:k}}t.fn.timeliny=function(e){if(console.log(e),"string"==typeof arguments[0]){var a,s=arguments[0],r=Array.prototype.slice.call(arguments,1);return this.each(function(){if(!t.data(this,"plugin_timeliny")||"function"!=typeof t.data(this,"plugin_timeliny")[s])throw new Error("Method "+s+" does not exist on jQuery.timeliny");a=t.data(this,"plugin_timeliny")[s].apply(this,r)}),a!==i?a:this}if("object"==typeof e||!e)return this.each(function(){t.data(this,"plugin_timeliny")||t.data(this,"plugin_timeliny",new n(this,e))})},t.fn.timeliny.defaults={order:"asc",className:"timeliny",wrapper:'<div class="timeliny-wrapper"></div>',boundaries:2,animationSpeed:250,hideBlankYears:!1,onInit:function(){},onDestroy:function(){},afterLoad:function(t){},onLeave:function(t,e){},afterChange:function(t){},afterResize:function(){}}}(jQuery,window,document);