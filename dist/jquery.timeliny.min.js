!function(a,e,t,i){"use strict";function n(n,s){function r(){w("onInit"),o(),s.hideBlankYears===!1&&l(),d(),m(),f(),p(),y(),u(),v(),h(),N(),c()}function o(){z.detach().sort(function(e,t){return"asc"===s.order?a(e).data("year")-a(t).data("year"):a(t).data("year")-a(e).data("year")}),C.append(z)}function c(){C.addClass("loaded");var a=C.find("."+s.className+"-timeblock.active").first().attr("data-year");w("afterLoad",[a])}function l(){var a=parseInt(z.first().attr("data-year")),e=parseInt(z.last().attr("data-year"));if("asc"===s.order)for(var t=a-s.boundaries;t<e+s.boundaries+1;t++)z.parent().find("[data-year="+t+"]").length<=0&&(t>a-s.boundaries?z.parent().find("[data-year="+(t-1)+"]").after('<div data-year="'+t+'" class="inactive"></div>'):z.first().before('<div data-year="'+t+'" class="inactive"></div>'));else for(var t=a+s.boundaries;t>=e-s.boundaries;t--)z.parent().find("[data-year="+t+"]").length<=0&&(t<a+s.boundaries?z.parent().find("[data-year="+(t+1)+"]").after('<div data-year="'+t+'" class="inactive"></div>'):z.first().before('<div data-year="'+t+'" class="inactive"></div>'));z=C.children()}function d(){return C.addClass(s.className).children().wrapAll(s.wrapper).wrapAll('<div class="'+s.className+'-timeline"></div>')}function f(){var a=.8*C.css("padding-top").replace("px","");C.find("."+s.className+"-timeline").css("width",""+z.length*a+"px"),C.find("."+s.className+"-timeliny-timeblock").css("width",""+a+"px")}function m(){z.each(function(e){var t=a(this).html(),i=a(this).attr("data-year"),n='<a href="#'+i+'" class="'+s.className+'-dot" data-year="'+i+'" data-text="'+t+'"></a>';a(this).addClass(""+s.className+"-timeblock").html(n)})}function u(){C.append('<div class="'+s.className+'-vertical-line"></div>')}function v(a){var e,t=C.find("."+s.className+"-vertical-line").position().left,i=C.find("."+s.className+"-timeblock.active").position().left,n=C.find("."+s.className+"-timeblock.active ."+s.className+"-dot").width()/2,r=i-t;e=r>0?"-"+(Math.abs(r)+n+1):"+"+(Math.abs(r)-n-1),C.find("."+s.className+"-timeline").animate({left:e},s.animationSpeed,function(){if("undefined"!=typeof a)if("click"===a){var e=C.find("."+s.className+"-timeblock.active").first().attr("data-year");w("afterChange",[e])}else"resize"===a&&w("afterResize")})}function p(){z.parent().find("."+s.className+"-timeblock:not(.inactive) ."+s.className+"-dot").on("click",function(e){e.preventDefault();var t=a(this).parent().parent().find("."+s.className+"-timeblock.active").attr("data-year"),i=a(this).attr("data-year");return t!=i&&(w("onLeave",[t,i]),z.removeClass("active"),a(this).closest("."+s.className+"-timeblock").addClass("active")),v("click"),!1})}function y(){a("html").keydown(function(e){if(39==e.which){var t=a(this).find("."+s.className+"-timeblock:not(.inactive) ."+s.className+"-dot"),i=(a(t).parent().parent().find("."+s.className+"-timeblock.active").attr("data-year"),a(t).parent().parent().find("."+s.className+"-timeblock.active").next().attr("data-year"));b(i)}else if(37==e.which){var t=a(this).find("."+s.className+"-timeblock:not(.inactive) ."+s.className+"-dot"),n=(a(t).parent().parent().find("."+s.className+"-timeblock.active").attr("data-year"),a(t).parent().parent().find("."+s.className+"-timeblock.active").prev().attr("data-year"));b(n)}})}function h(){function t(a,e){var t;return function(){var i=arguments,n=this;clearTimeout(t),t=setTimeout(function(){a.apply(n,i)},e)}}a(e).on("resize.timeliny",t(function(){v("resize")},350))}function N(){function i(a){o=a,l=c-o.offsetLeft}function n(a){c=t.all?e.event.clientX:a.pageX,null!==o&&(o.style.left=c-l+"px")}function r(){if(o){var e=C.find("."+s.className+"-vertical-line").offset().left,t=null,i=1e23;z.parent().find("."+s.className+"-timeblock:not(.inactive) ."+s.className+"-dot").each(function(n){var s=a(this).offset().left,r=Math.abs(s-e);r<i&&(console.log(a(this).attr("data-year")),t=a(this).attr("data-year"),i=r)}),C.find("."+s.className+"-dot[data-year="+t+"]").trigger("click"),o=null}}var o=null,c=0,l=0;s.draggedElement?(a(s.draggedElement).on("mousedown",function(){return i(C.find("."+s.className+"-timeline")[0]),!1}),a(s.draggedElement).on("mousemove",function(a){n(a)}),a(s.draggedElement).on("mouseup",function(){r()})):(C.first().on("mousedown",function(){return i(C.find("."+s.className+"-timeline")[0]),!1}),a(t).on("mousemove.timeliny",function(a){n(a)}),a(t).on("mouseup.timeliny",function(){r()}))}function b(a){var e=C.find("."+s.className+"-timeblock[data-year="+a+"]:not(.inactive) ."+s.className+"-dot").first();e.length>0&&e.trigger("click")}function g(a,e){return e?void(s[a]=e):s[a]}function k(){C.each(function(){var i=a(this);a(e).off("resize.timeliny"),i.find("."+s.className+"-timeblock:not(.inactive) ."+s.className+"-dot").off("click"),a(t).off("mousemove.timeliny"),a(t).off("mouseup.timeliny"),i.first().off("mousedown"),i.remove(),w("onDestroy"),i.removeData("plugin_timeliny")})}function w(a,e){s[a]!==i&&s[a].apply(x,e)}var x=n,C=a(n),z=C.children();return s=a.extend({},a.fn.timeliny.defaults,s),r(),{option:g,destroy:k,goToYear:b}}a.fn.timeliny=function(e){if(console.log(e),"string"==typeof arguments[0]){var t,s=arguments[0],r=Array.prototype.slice.call(arguments,1);return this.each(function(){if(!a.data(this,"plugin_timeliny")||"function"!=typeof a.data(this,"plugin_timeliny")[s])throw new Error("Method "+s+" does not exist on jQuery.timeliny");t=a.data(this,"plugin_timeliny")[s].apply(this,r)}),t!==i?t:this}if("object"==typeof e||!e)return this.each(function(){a.data(this,"plugin_timeliny")||a.data(this,"plugin_timeliny",new n(this,e))})},a.fn.timeliny.defaults={order:"asc",className:"timeliny",wrapper:'<div class="timeliny-wrapper"></div>',boundaries:2,animationSpeed:250,hideBlankYears:!1,onInit:function(){},onDestroy:function(){},afterLoad:function(a){},onLeave:function(a,e){},afterChange:function(a){},afterResize:function(){}}}(jQuery,window,document);